"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.isVirtualFileId = isVirtualFileId;
exports.getVirtualFileId = getVirtualFileId;
exports.resolveVirtualFileId = resolveVirtualFileId;
const assert_js_1 = require("./assert.js");
const idBase = 'virtual:vike:';
// https://vitejs.dev/guide/api-plugin.html#virtual-modules-convention
const tag = '\0';
function isVirtualFileId(id) {
    if (id.startsWith(idBase))
        return true;
    if (id.startsWith(tag + idBase))
        return true;
    (0, assert_js_1.assert)(!id.includes(idBase));
    return false;
}
function getVirtualFileId(id) {
    if (id.startsWith(tag)) {
        id = id.slice(tag.length);
    }
    (0, assert_js_1.assert)(!id.startsWith(tag));
    return id;
}
function resolveVirtualFileId(id) {
    (0, assert_js_1.assert)(isVirtualFileId(id));
    if (!id.startsWith(tag)) {
        id = tag + id;
    }
    (0, assert_js_1.assert)(id.startsWith(tag));
    return id;
}
