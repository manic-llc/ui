"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.modifyUrl = modifyUrl;
const utils_js_1 = require("./utils.js");
/**
 * Modify a URL.
 *
 * Example: changing the URL pathname for internationalization.
 *
 * https://vike.dev/modifyUrl
 */
function modifyUrl(url, modify) {
    const urlParsed = (0, utils_js_1.parseUrl)(url, '/');
    // Pathname
    const pathname = modify.pathname ?? urlParsed.pathname;
    // Origin
    const originParts = [
        modify.protocol ?? urlParsed.protocol ?? '',
        modify.hostname ?? urlParsed.hostname ?? ''
    ];
    const port = modify.port ?? urlParsed.port;
    if (port || port === 0) {
        originParts.push(`:${port}`);
    }
    const origin = originParts.join('');
    const urlModified = (0, utils_js_1.createUrlFromComponents)(origin, pathname, 
    // Should we also support modifying search and hash?
    urlParsed.searchOriginal, urlParsed.hashOriginal);
    return urlModified;
}
